<body>
  <form [formGroup]="examenForm" (ngSubmit)="onSubmit()">
    <!-- Titre -->
    <h2 class="form-title">CrÃ©er un Examen</h2>

    <!-- Sujet -->
    <div class="form-group">
      <label for="topic">Sujet</label>
      <input
        type="text"
        formControlName="topic"
        placeholder="Entrez le sujet de l'examen"
      />
    </div>

    <!-- Nombre de QCM -->
    <div class="form-group">
      <label for="numMCQ">Nombre de QCM</label>
      <input
        id="numMCQ"
        type="number"
        formControlName="numMCQ"
        placeholder="Ex: 10"
      />
    </div>

    <!-- Nombre de Vrai/Faux -->
    <div class="form-group">
      <label for="numTrueFalse">Nombre de questions Vrai/Faux</label>
      <input
        id="numTrueFalse"
        type="number"
        formControlName="numTrueFalse"
        placeholder="Ex: 5"
      />
    </div>

    <!-- Nombre de RÃ©ponses Courtes -->
    <div class="form-group">
      <label for="numShortAnswer">Nombre de rÃ©ponses courtes</label>
      <input
        id="numShortAnswer"
        type="number"
        formControlName="numShortAnswer"
        placeholder="Ex: 3"
      />
    </div>

    <!-- DifficultÃ© -->
    <div class="form-group">
      <label for="difficulty">Niveau de difficultÃ©</label>
      <select id="difficulty" formControlName="difficulty">
        <option value="" disabled selected>SÃ©lectionnez un niveau</option>
        <option value="Facile">Facile</option>
        <option value="Moyen">Moyen</option>
        <option value="Difficile">Difficile</option>
      </select>
    </div>

    <!-- Bouton -->
    <button type="submit" [disabled]="examenForm.invalid">CrÃ©er</button>
    <div *ngIf="loading" class="loading">â³ GÃ©nÃ©ration en cours...</div>
    <!-- Message d'erreur -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </form>

  <!-- âœ… Exam generated card -->
  <div *ngIf="questionPdfUrl || answerPdfUrl" class="pdf-card">
    <h2 class="form-title">ğŸ“„ Examen gÃ©nÃ©rÃ© avec succÃ¨s</h2>
    <div class="pdf-links">
      <a *ngIf="questionPdfUrl" [href]="questionPdfUrl" target="_blank" class="pdf-btn questions">
        ğŸ“˜ Voir les questions
      </a>
      <a *ngIf="answerPdfUrl" [href]="answerPdfUrl" target="_blank" class="pdf-btn answers">
        ğŸ“— Voir les rÃ©ponses
      </a>
    </div>
    <div *ngIf="examGenerated" class="pdf-card">
    <h3>ğŸ§  Ajuster ou RÃ©gÃ©nÃ©rer l'examen</h3>

    <textarea [(ngModel)]="aiPrompt" placeholder="DÃ©crivez les changements que vous voulez..."></textarea>
    <button class="btn-ai" (click)="regenerateExam()">ğŸ”„ GÃ©nÃ©rer un nouvel examen</button>

  <div *ngIf="loading" class="loading">â³ GÃ©nÃ©ration en cours...</div>
</div>
  </div>


</body>
